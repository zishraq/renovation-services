{% extends 'base.html' %}
{% load static %}

{% block title %}Gallery - Our Work Portfolio{% endblock %}

{% block content %}
<div class="gallery-header" style="background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('{% if projects.first.image %}{{ projects.first.image.url }}{% else %}/static/images/default-bg.jpg{% endif %}') center/cover;">
    <div class="container py-5 mt-5 text-center text-white">
        <h1 class="display-4 fw-bold">Our Work Gallery</h1>
        <p class="lead">Real projects. Real results. Real craftsmanship.</p>
    </div>
</div>

<div class="container py-5">
    <div class="row g-4">
        {% for project in projects %}
        <div class="col-md-6 col-lg-4">
            <div class="gallery-image">
                {% if project.image %}
                    <img src="{{ project.image.url }}" alt="{{ project.title }}" class="img-fluid">
                {% else %}
                    <div style="width: 100%; height: 300px; background: #e9ecef; display: flex; align-items: center; justify-content: center;">
                        <span style="color: #6c757d; font-size: 18px;">No Image Available</span>
                    </div>
                {% endif %}
                <div class="image-caption">
                    <h5>{{ project.title }}</h5>
                    <p>{{ project.description|truncatewords:15 }}</p>
                    {% if project.badge_text %}
                    <span class="badge bg-{{ project.badge_color }} {% if project.badge_color == 'warning' %}text-dark{% else %}text-white{% endif %}">
                        {{ project.badge_text }}
                    </span>
                    {% endif %}
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center py-5">
            <h3 class="text-muted">No projects yet</h3>
            <p class="text-muted">Check back soon for our latest work!</p>
        </div>
        {% endfor %}
    </div>
</div>

<style>
.gallery-header {
    min-height: 300px;
    display: flex;
    align-items: center;
}

.gallery-image {
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    cursor: pointer;
}

.gallery-image img {
    width: 100%;
    height: 300px;
    object-fit: cover;
    transition: transform 0.3s;
}

.gallery-image:hover img {
    transform: scale(1.05);
}

.image-caption {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
    color: white;
    padding: 20px;
    transform: translateY(100%);
    transition: transform 0.3s;
}

.gallery-image:hover .image-caption {
    transform: translateY(0);
}

.image-caption .badge {
    margin-top: 10px;
}
</style>
{% endblock %}
